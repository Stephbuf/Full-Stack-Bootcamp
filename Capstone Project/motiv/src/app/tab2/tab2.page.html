<ion-content [fullscreen]="true" class="nutrition-page">
  <!-- Header -->
  <div class="header">
    <h2>{{ currentDay }}</h2>
    <ion-button size="small" fill="clear" (click)="editGoal()">Edit</ion-button>
  </div>

  <!-- Logging Progress Card -->
  <div class="progress-card">
    <div class="progress-top">
      <div>
        <h4>Logging Progress</h4>
        <p class="status">Crushing it!</p>
      </div>
      <!-- <ion-button fill="clear" (click)="goToFoodSearch()">
        <ion-icon slot="icon-only" name="add-outline"></ion-icon>
      </ion-button> -->
      
      
    
    </div>
    <div class="progress-bar">
      <div class="progress-fill"></div>
    </div>
    <p class="progress-info">
      Youâ€™ve logged <span class="link">{{ getTotalMealsLogged() }} meals</span> and
      <span class="link">{{ getTotalMacros('protein') }}g of protein</span>.
    </p>
  </div>

  <!-- Macros Card -->
  <div class="macros-card">
    <h4>Macros</h4>
    <div class="macros">
      <div class="macro">
        <svg viewBox="0 0 36 36" class="circular-chart carbs">
          <path class="circle-bg"
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
          <path class="circle"
                [attr.stroke-dasharray]="(getTotalMacros('carbs') / 250 * 100) + ', 100'"
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
          <text x="18" y="20.35" class="percentage">{{ getTotalMacros('carbs') }}</text>
        </svg>
        <label>Net Carbs</label>
        <small>{{ 250 - getTotalMacros('carbs') }}g left</small>
      </div>

      <div class="macro">
        <svg viewBox="0 0 36 36" class="circular-chart fat">
          <path class="circle-bg"
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
          <path class="circle"
                [attr.stroke-dasharray]="(getTotalMacros('fat') / 67 * 100) + ', 100'"
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
          <text x="18" y="20.35" class="percentage">{{ getTotalMacros('fat') }}</text>
        </svg>
        <label>Fat</label>
        <small>{{ 67 - getTotalMacros('fat') }}g left</small>
      </div>

      <div class="macro">
        <svg viewBox="0 0 36 36" class="circular-chart protein">
          <path class="circle-bg"
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
          <path class="circle"
                [attr.stroke-dasharray]="(getTotalMacros('protein') / 100 * 100) + ', 100'"
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
          <text x="18" y="20.35" class="percentage">{{ getTotalMacros('protein') }}</text>
        </svg>
        <label>Protein</label>
        <small>{{ 100 - getTotalMacros('protein') }}g left</small>
      </div>
    </div>
  </div>

  <!-- Water Log Card -->
  <div class="water-log-card">
    <div class="header-row">
      <div class="icon-text">
        <ion-icon name="water-outline"></ion-icon>
        <div class="water-title">
          <h4>Water Intake</h4>
          <p>{{ totalWaterLitres }} / 2 litres</p>
        </div>
      </div>
      <div class="water-controls">
        <ion-button fill="clear" size="small" (click)="removeWater()" class="remove-button">
          <ion-icon name="remove-outline"></ion-icon>
        </ion-button>
        <ion-button fill="clear" size="small" (click)="addWater()" class="add-button">
          <ion-icon name="add-outline"></ion-icon>
        </ion-button>
      </div>
    </div>
  
    <div class="bottles-row">
      <div
        class="bottle"
        *ngFor="let i of [0,1,2,3,4,5,6,7,8,9]"
        [class.filled]="i < Math.floor(totalWaterLitres / 0.2)"
      >
        <div class="fill"></div>
      </div>
    </div>
  </div>
  
</ion-content>
